	<h2>Lista de aljibes</h2>
	<div class="row">
	  <div class="col-xs-12 col-md-6">
	  <p>
		<%= link_to "Nuevo Aljibe", new_tank_path, class: "btn btn-success btn-sm" %>
		</p>
		<%= link_to "Ordenar(A-Z)", order_by_title_path, class: "btn btn-primary btn-sm" %> 
		<%= link_to "Ordenar por ID", order_by_id_path, class: "btn btn-primary btn-sm" %>
		<table class="table table-striped" id="alchups">
			<tr>
				<th>#</th><th>Nombre</th><th></th><th></th>
			</tr>
			<% @tanks.each do |tank| %>

				<% coor = Coordinates.utm_to_lat_long("WGS-84", tank.latitude, tank.longitude, "30N") %>
				<tr data-latitude="<%= coor[:lat] %>" data-longitude="<%= coor[:long] %>"
					data-iden = "<%= tank.id %>" data-title = "<%= tank.title %>">
					<td><%= link_to tank.id, tank %></td>
					<td><%= link_to tank.title, tank %></td>
					<td><%= link_to "editar", edit_tank_path(tank) %></td>
					<td><%= link_to "borrar",tank, method: :delete, data: {confirm: "Â¿Estas seguro?"} %></td>
				</tr>
			<% end %>
		</table>
		 
	  </div>
	  <div class="col-xs-6 col-md-6" id="map-canvas" style="height: 500px; margin-top: 40px; padding: 0;">
	  </div>	
	</div>

<script type="text/javascript">
	  function initialize() {
	  	var infowindow = new google.maps.InfoWindow();

	    var posicion = new google.maps.LatLng(41.89, 0.3179)

	    var mapOptions = {
	      center: posicion,
	      zoom: 11,
	      mapTypeId: google.maps.MapTypeId.SATELLITE
	    };

	    var map = new google.maps.Map(document.getElementById('map-canvas'),
	        mapOptions);

	    $('#alchups').find('tr').each(function() {
	    	var lati = $(this).data("latitude");
	    	var longi = $(this).data("longitude");
	    	var iden = $(this).data("iden");
	    	var title = $(this).data("title");
	    	var contentInfo = '<a href="/tanks/'+ iden +'">'+ title +'</a>';
			
    		var marker = new google.maps.Marker({
	    	  position: new google.maps.LatLng(lati, longi),
	    	  map: map,
	    	  title: 'soy un alchup'
	    	});

	    	google.maps.event.addListener(marker, 'click', function() {
	    			infowindow.setContent(contentInfo)
       		  infowindow.open(map,marker);
   			});
    	
 		 });	    
	  }
	  google.maps.event.addDomListener(window, 'load', initialize);
</script>
